language: node_js
node_js:
- '8'
- '10'
services:
- docker
before_install:
- "./run-infra.sh"
install:
  - npm install -g codecov
  - npm run install:ci
cache:
  directories:
  - node_modules
script:
  - npm run test:ci
  - npm run build
after_script:
- "./clean-infra.sh"
